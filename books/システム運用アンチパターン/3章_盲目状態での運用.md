# 盲目状態
一般的なパフォーマンスの数値はあったとしても、運用の観点からは事実上、**盲目状態**なのです。

# 開発と運用の役割
「従来、開発と運用の責任は真っ赤な線で分けられていた」

DevOpsでは両チームともシステムが何を行うのか理解する必要がある
何か起こった際に責任の擦り合いをしている場合ではない
どの状態が期待通りの動作か理解しておかないと数字だけ見ても意味がない

# 運用の可視化
主要な情報源
1. メトリクス：システムリソースのある時点での測定値　→ BSのイメージ
2. ログ：発生したイベントを記述したシステムが生成するメッセージ → PLのイメージ

# キューイングシステム
ジョブは資源の利用が可能になるまで待って、利用可能な段階になった時に資源を有効に利用して効果的にジョブを実行することができる

メールサーバーシステムは多数の人が同じサーバーを利用しており、同時にそれぞれの人が大量の命令を実行すると、処理能力の限界を超えてフリーズしてしまう
このようなリスクに備えるためのシステムがキューイングシステムで、利用者が利用したいプログラムに関する情報を一時的に預かり、プログラムを振り分けることができる
例えるなら、カラオケボックスの受付、ホテルのフロントみたいなもの

# 故障モード影響分析
深刻度 × 発生頻度 ×　検出可能性
高いものほど優先度が高い（RPN：risk priority number）、どれを下げるかがポイント

深刻度、発生頻度を変更するには大きな改修が発生することが多い
検出可能性を上げ、検出可能性を下げることが近道

# ログの集約
ログの集約にはなるべく既存のシステムを使う
せめてサードパーティのサービス
→ログ集約システムの管理をする手間を省く（本末転倒）

ログ集約システムの例：[Splunk](https://www.splunk.com/ja_jp)

運用担当のエンジニアが直接サーバー内のログを見にいかなくて良いように、誰でもログを見えるようにする
→DevOpsの考え方「チームに権限を与え可能な限り多くの情報を共有し民主化する」

# 良いログメッセージ
contextが分かることが大事
悪い例「クレジットカードの認証を完了できませんでした」
→これではどのような状態かが分からない

エラーメッセージに記載すべき内容
- 何のアクションが実行されたか
- そのアクションの期待される結果は何か
- そのアクションの実際の結果は何か
- 取るべき修復手順は何か
- このエラーによって引き起こされる潜在的な結果は何か
